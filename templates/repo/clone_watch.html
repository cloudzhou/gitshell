{% extends "repo/repo.html" %}

{% block css %}
<style>
	.repo-1 {
		border-left: 2px solid #0074cc; }
	.repo-2 {
		border-left: 2px solid #5bb75b;
		border-bottom-color: #bbb; }
	.repo-3 {
		margin-left: 50px;
		border-left: 2px solid #da4f49; }
</style>
{% endblock %}

{% block subcontainer %}

<div class="repo-file-container">
	<div class="repo-meta clearfix">
		<h2 class="title pull-left">衍生仓库树</h2>
		<!--<ul class="unstyled repo-list clearfix">-->
			<!--<li class="parent-repo" style="color: #0074CC"><i></i>父仓库</li>-->
			<!--<li class="current-repo" style="color: #5BB75B"><i></i>本仓库</li>-->
			<!--<li class="child-repo" style="color: #DA4F49"><i></i>子仓库</li>-->
			<!--</ul>-->
	</div>

    <div class="file-container">
			<div class="frame">
				{%for fork_repos in fork_repos_tree%}
					{%for fork_repo in fork_repos%}
						<div class="member repo-{{forloop.parentloop.counter}} clearfix">
							<div class="avatar">
								<img src="https://gravatar.com/avatar/{{fork_repo.imgurl}}?s=35">
							</div>
							<div class="user-body">
								<p class="username">
									<a class="c_img_{{forloop.parentloop.counter}}" href="/{{fork_repo.username}}/">{{fork_repo.username}}</a>
								</p>
								<p class="repo-description">{{fork_repo.desc}}</p>
							</div>
							<ul class="details unstyled clearfix">
								<li><a href="javascript:void(0)" rel="tooltip" data-original-title="commit {{ fork_repo.commit }}次数" class="label"><span>{{ fork_repo.commit }}</span>commits</a></li>
								<li><a href="javascript:void(0)" rel="tooltip" data-original-title="watch {{ fork_repo.watch }}次数" class="label"><span>{{ fork_repo.watch }}</span>watches</a></li>
								<li><a href="javascript:void(0)" rel="tooltip" data-original-title="fork {{ fork_repo.fork }}次数" class="label"><span>{{ fork_repo.fork }}</span>forks</a></li>
							</ul>
						</div>
					{%endfor%}
				{%endfor%}
			</div>

			<div class="repo-meta">
				<h2 class="title">关注用户</h2>
			</div>
			<div class="frame">
				{%for watch_user in watch_users%}
					<div class="member clearfix">
						<div class="avatar">
							<img class="avatar_left" src="https://gravatar.com/avatar/{{ watch_user.imgurl }}?s=35">
						</div>
						<div class="user-body">
							<p class="username">
								<a href="/{{watch_user.username}}/">{{watch_user.username}}</a>
								{%if watch_user.nickname%}
									<span>({{watch_user.nickname}})</span>
								{%endif%}
								{%if watch_user.tweet%}
									<span class="tweet">{{watch_user.tweet}}</span>
								{%endif%}
							</p>
							<p class="muted"><i class="icon-time"></i>加入: <span class="c_unixtime">{{watch_user.date_joined}}</span><span class="divider">/</span><i class="icon-map-marker"></i>最近登录: <span class="c_unixtime">{{watch_user.last_login}}</span></p>
						</div>
					</div>
				{%endfor%}
		</div>
    </div>

	</div>

{% endblock %}

{% block subjs %}
	<script>
		$(function(){
				$('.c_unixtime').each(function(index){ 
						$(this).html(moment(new Date($(this).html()*1000)).fromNow());
						$(this).show();
				});
				$('.table').tooltip({
					selector: "a[rel=tooltip]"
				})
		});
	</script>
{% endblock %}
