{% extends "base.html" %}
{% load gstools %}
{% block css %}
<style>
.user_chart {min-width: 400px; height: 200px; margin: 0 auto}
.c_repo_attr {margin-right: 20px}
</style>
{% endblock %}
{% block container %}
<div class="row">
    <div class="span6">
        <div class="page-header" style="padding-bottom: 0px">
            <div style="margin-bottom: 10px">
                <h3>活跃仓库列表</h3>
            </div>
        </div>
        {%for repo in repos%}
        <div class="c_repo">
            <h3>1. <img style="margin: 10px;" src="https://gravatar.com/avatar/{{userimgurl_dict|keyvalue:repo.user_id}}?s=20"><a href="/{{username_dict|keyvalue:repo.user_id}}/">{{username_dict|keyvalue:repo.user_id}}</a> / 
            <a href="/{{username_dict|keyvalue:repo.user_id}}/{{repo.name}}/">{{repo.name}}</a>
            <span style="float: right;">
            <a data-original-title="提交次数" rel="tooltip" class="c_repo_attr" href="javascript:void(0)">♯ {{repo.commit}}</a>
            <a data-original-title="关注数量" rel="tooltip" class="c_repo_attr" href="javascript:void(0)">♥ {{repo.watch}}</a>
            <a data-original-title="衍生次数" rel="tooltip" class="c_repo_attr" href="javascript:void(0)">♂ {{repo.fork}}</a></span></h3>
            <div style="margin-left: 30px;">
                <h6 style="margin-bottom: 3px">
                创建于 {{repo.modify_time|date:'y/m/d'}}，最近更新 {{repo.create_time|date:'y/m/d'}}</h6> 
                <p>{{repo.desc}}</p>
            </div>
        </div>
        {%endfor%}
    </div>
    <div class="span4">
        <div class="page-header" style="padding-bottom: 0px">
            <div style="margin-bottom: 10px">
                <h3>最新提交信息</h3>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block js %}
<script>
/*global jQuery, window */
$(function(){
    $('.c_unixtime').each(function(index){ 
        $(this).html(moment(new Date($(this).html()*1000)).fromNow());
        $(this).show();
    });
    $('.c_repo').tooltip({
      selector: "a[rel=tooltip]"
    });

});
</script>
{% endblock %}
